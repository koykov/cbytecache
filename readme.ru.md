# CByteCache

Байтовый in-memory кэш, базирующийся на [cbyte](https://github.com/koykov/cbyte) библиотеке. Написан как замена
[bigcache](https://github.com/allegro/bigcache), но кардинально отличается от него организацией хранения данных и
множеством дополнительных функций, облегчающих работу в хайлоад проектах.

## Как работает

Модель хранения данных `bigcache` основана на хэш-таблице `map[uint64]uint32` для хранения ключей и огромных слайсов
`[]byte` для хранения данных. Это прекрасно помогает для нивелирования GC нагрузки, но избыточно с точки зрения экономии
памяти - так, однажды выделенный избыток памяти, никогда не будет освобождён. Для проектов с переменной нагрузкой это
весьма неоптимальный подход, т.к. память будет простаивать без пользы.

`cbytecache` использует ту же структуру для хранения ключей, но непосредственно байтовое хранилище использует диаметрально
противоположный подход - память разделена на небольшие арены фиксированного размера, а данные распределяются между ними.
Арены по необходимости могут выделяться, использоваться и освобождаться, что позволяет в каждый момент времени
использовать ровно столько памяти сколько необходимо. А для того, чтобы GC не аффектил производительность как кэша, так
и системы, арены используют библиотеку [cbyte](https://github.com/koykov/cbyte) для маскировки от GC. С точки срения GC
арена это просто [структура](https://github.com/koykov/cbytecache/blob/master/arena.go#L13), состоящая из числовых полей
и располагающаяся в стеке. Таким образом GC не будет никак проверять эту структуру.
